!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var r=function(e){var t={target:"confetti-holder",max:80,size:1,animate:!0,props:["circle","square","triangle","line"],colors:[[165,104,246],[230,61,135],[0,199,228],[253,214,126]],clock:25,interval:null,rotate:!1,width:window.innerWidth,height:window.innerHeight};e&&(e.target&&(t.target=e.target),e.max&&(t.max=e.max),e.size&&(t.size=e.size),void 0!==e.animate&&null!==e.animate&&(t.animate=e.animate),e.props&&(t.props=e.props),e.colors&&(t.colors=e.colors),e.clock&&(t.clock=e.clock),e.width&&(t.width=e.width),e.height&&(t.height=e.height),void 0!==e.rotate&&null!==e.rotate&&(t.rotate=e.rotate));var o=document.getElementById(t.target),r=o.getContext("2d"),n=[];function s(e,t){e||(e=1);var o=Math.random()*e;return t?Math.floor(o):o}var i=t.props.reduce((function(e,t){return e+(t.weight||1)}),0);function a(){var e=t.props[function(){for(var e=Math.random()*i,o=0;o<t.props.length;++o){var r=t.props[o].weight||1;if(e<r)return o;e-=r}}()];return{prop:e.type?e.type:e,x:s(t.width),y:s(t.height),src:e.src,radius:s(4)+1,size:e.size,rotate:t.rotate,line:Math.floor(s(65)-30),angles:[s(10,!0)+2,s(10,!0)+2,s(10,!0)+2,s(10,!0)+2],color:t.colors[s(t.colors.length,!0)],rotation:s(360,!0)*Math.PI/180,speed:s(t.clock/7)+t.clock/30}}function l(e){var o=e.radius<=3?.4:.8;switch(r.fillStyle=r.strokeStyle="rgba("+e.color+", "+o+")",r.beginPath(),e.prop){case"circle":r.moveTo(e.x,e.y),r.arc(e.x,e.y,e.radius*t.size,0,2*Math.PI,!0),r.fill();break;case"triangle":r.moveTo(e.x,e.y),r.lineTo(e.x+e.angles[0]*t.size,e.y+e.angles[1]*t.size),r.lineTo(e.x+e.angles[2]*t.size,e.y+e.angles[3]*t.size),r.closePath(),r.fill();break;case"line":r.moveTo(e.x,e.y),r.lineTo(e.x+e.line*t.size,e.y+5*e.radius),r.lineWidth=2*t.size,r.stroke();break;case"square":r.save(),r.translate(e.x+15,e.y+5),r.rotate(e.rotation),r.fillRect(-15*t.size,-5*t.size,15*t.size,5*t.size),r.restore();break;case"svg":r.save();var n=new Image;n.src=e.src;var s=e.size||15;r.translate(e.x+s/2,e.y+s/2),e.rotate&&r.rotate(e.rotation),r.drawImage(n,-s/2*t.size,-s/2*t.size,s*t.size,s*t.size),r.restore()}}return{render:function(){o.width=t.width,o.height=t.height,n=[];for(var e=0;e<t.max;e++)n.push(a());return requestAnimationFrame((function e(){for(var o in r.clearRect(0,0,t.width,t.height),n)l(n[o]);!function(){for(var e=0;e<t.max;e++){var o=n[e];t.animate&&(o.y+=o.speed),o.rotate&&(o.rotation+=o.speed/35),(o.speed>=0&&o.y>t.height||o.speed<0&&o.y<0)&&(n[e]=o,n[e].x=s(t.width,!0),n[e].y=o.speed>=0?-10:parseFloat(t.height))}}(),t.animate&&requestAnimationFrame(e)}))},clear:function(){t.animate=!1,clearInterval(t.interval),requestAnimationFrame((function(){r.clearRect(0,0,o.width,o.height);var e=o.width;o.width=1,o.width=e}))}}},n=document.getElementById("cnvs");n.width=630,n.height=630;var s=n.getContext("2d"),i=new Audio("./audio/tap-mellow.mp3"),a=new Audio("./audio/winning.wav"),l=0;const c=document.createElement("img");c.src="images/wood-bg-bottom.png",c.onload=function(){s.drawImage(c,0,0,630,630),g()};const h=document.createElement("img");h.src="images/wood-bg-top.png",h.onload=function(){s.drawImage(h,0,0,630,630),s.clearRect(543,231,45,78)};const p=document.createElement("img");p.src="images/arrow.png";var u=new r({target:"cnvs",rotate:!0});class d{constructor(e=[],t="blue",o=!1){this.pos=e,this.type=e.length>4?"Truck":"Car",this.color=o?"red":t,this.direction=function(e){for(var t={x:[],y:[]},o=0;o<e.length;o++){var r=e[o],n=e[o+1];t.x.includes(r)||t.x.push(r),t.y.includes(n)||t.y.push(n),o+=1}return t.x.length<t.y.length?"y":"x"}(e),this.red=o}draw(){for(let e=0;e<this.pos.length;e++)s.fillStyle=this.color,s.fillRect(75+78*this.pos[e],75+78*this.pos[e+1],78,78),e+=1}move(e,t,o){var r=Array.from(this.pos);"x"===this.direction?this.pos[0]===e?(this.pos[0]--,this.pos[2]--,"Truck"===this.type&&this.pos[4]--):(this.pos[4]===e&&"Truck"===this.type||this.pos[2]===e&&"Car"===this.type)&&(this.pos[0]++,this.pos[2]++,"Truck"===this.type&&this.pos[4]++):"y"===this.direction&&(this.pos[1]===t?(this.pos[1]--,this.pos[3]--,"Truck"===this.type&&this.pos[5]--):(this.pos[5]===t&&"Truck"===this.type||this.pos[3]===t&&"Car"===this.type)&&(this.pos[1]++,this.pos[3]++,"Truck"===this.type&&this.pos[5]++));for(let e=0;e<this.pos.length;e++){const t=this.pos[e],o=this.pos[e+1];if(t<0||t>5||o<0||o>5)return this.pos=r}for(let e=0;e<w.length;e++){const t=w[e],n="Truck"===this.type?4:3;for(let s=0;s<n;s++){if(o!==e){if(t.pos[s]===this.pos[0]&&t.pos[s+1]===this.pos[1])return this.pos=r;if(t.pos[s]===this.pos[2]&&t.pos[s+1]===this.pos[3])return this.pos=r;if("Truck"===this.type&&t.pos[s]===this.pos[4]&&t.pos[s+1]===this.pos[5])return this.pos=r;if("Truck"===t.type&&t.pos[4]===this.pos[s]&&t.pos[5]===this.pos[s+1])return this.pos=r;if("Truck"===t.type&&"Truck"===this.type&&t.pos[4]===this.pos[4]&&t.pos[5]===this.pos[5])return this.pos=r}s+=1}}!0!==this.red||5!==this.pos[0]&&5!==this.pos[2]||2!==this.pos[1]&&2!==this.pos[3]||(document.getElementById("header").innerText="You Won",u.render(),document.getElementsByClassName("modal")[0].classList="modal show",a.play()),l++,document.getElementById("move").innerText=l,i.play(),g()}}function g(){s.fillStyle="#1f2125",s.fillRect(0,0,630,630),s.drawImage(c,0,0,630,630),s.strokeStyle="white";for(let e=0;e<6;e++)for(let t=0;t<6;t++)s.strokeRect(75+78*e,75+78*t,78,78);w.forEach(e=>{e.draw()}),s.drawImage(h,0,0,630,630),s.clearRect(543,231,45,78)}var f=[[new d([2,5,3,5,4,5],"lightgreen"),new d([0,4,0,5],"orange"),new d([0,1,0,2,0,3],"violet"),new d([4,4,5,4],"lightblue"),new d([0,0,1,0],"green"),new d([3,1,3,2,3,3],"blue"),new d([5,0,5,1,5,2],"yellow"),new d([1,2,2,2],void 0,!0)],[new d([3,0,4,0,5,0],"yellow"),new d([3,1,3,2],"orange"),new d([5,1,5,2,5,3],"purple"),new d([4,2,4,3],"lightblue"),new d([4,4,5,4],"darkblue"),new d([0,3,1,3,2,3],"blue"),new d([0,0,0,1],"darkgreen"),new d([3,5,4,5],"lightgray"),new d([2,4,2,5],"pink"),new d([0,5,1,5],"lightgreen"),new d([0,2,1,2],void 0,!0)],[new d([3,2,3,3,3,4],"yellow"),new d([1,3,2,3],"darkgreen"),new d([5,3,5,4,5,5],"purple"),new d([1,4,1,5],"orange"),new d([2,5,3,5],"lightblue"),new d([1,2,2,2],void 0,!0)],[new d([0,0,0,1,0,2],"yellow"),new d([2,3,2,4],"orange"),new d([3,0,3,1,3,2],"purple"),new d([5,4,5,5],"lightblue"),new d([3,3,4,3,5,3],"blue"),new d([1,0,2,0],"darkgreen"),new d([2,5,3,5,4,5],"lightgreen"),new d([1,2,2,2],void 0,!0)]],m=Math.floor(Math.random()*f.length),w=JSON.parse(JSON.stringify(f[m])).map(e=>new d(e.pos,e.color,e.red));function y(e,t){for(let s=0;s<w.length;s++)for(var o=0;o<w[s].pos.length;o++){var r=w[s].pos[o],n=w[s].pos[o+1];if(e===r&&t===n)return[e,t,s];o+=1}}function v(e){var t=e.offsetX,o=e.offsetY;switch(!0){case t>465&&t<543:t=5;break;case t>387&&t<465:t=4;break;case t>309&&t<387:t=3;break;case t>231&&t<309:t=2;break;case t>153&&t<231:t=1;break;case t>75&&t<153:t=0;break;default:return}switch(!0){case o>465&&o<543:o=5;break;case o>387&&o<465:o=4;break;case o>309&&o<387:o=3;break;case o>231&&o<309:o=2;break;case o>153&&o<231:o=1;break;case o>75&&o<153:o=0;break;default:return}return[t,o]}function k(e,t,o,r,n,i){s.save(),s.translate(t+r/2,o+n/2),s.rotate(i*Math.PI/180),s.translate(-t-r/2,-o-n/2),s.drawImage(e,t,o,r,n),s.restore()}function b(e){g();var t=v(e);if(void 0===t)return;var o=y(t[0],t[1]);if(void 0===o)return;var r=w[o[2]];s.fillStyle="black";"y"===r.direction?(k(p,75+78*r.pos[0]+39-25,78*r.pos[1]+1+75+39-20,50,40,90),k(p,75+78*r.pos[r.pos.length-2]+39-25,78*r.pos[r.pos.length-1]+1+75+39-20,50,40,-90)):"x"===r.direction&&(k(p,75+78*r.pos[0]+39-25,78*r.pos[1]+1+75+39-20,50,40,0),k(p,75+78*r.pos[r.pos.length-2]+39-25,78*r.pos[r.pos.length-1]+1+75+39-20,50,40,-180))}n.onclick=function(e){var t=v(e),o=y(t[0],t[1]);void 0!==o&&(w[o[2]].move(o[0],o[1],o[2]),b(e))},document.body.onmousemove=b,document.body.onkeypress=function(e){console.log(e),"q"===e.key&&(document.getElementsByClassName("modal")[0].classList="modal hide")},document.getElementById("nxtLvl").onclick=function(e){for(;;){var t=Math.floor(Math.random()*f.length);if(t!==m){m=t,w=JSON.parse(JSON.stringify(f[t])).map(e=>new d(e.pos,e.color,e.red)),l=0;break}}g(),u.clear()},document.getElementById("playAgain").onclick=function(e){l=0,console.log(m,f[m]==w),w=JSON.parse(JSON.stringify(f[m])).map(e=>new d(e.pos,e.color,e.red)),g(),document.getElementById("move").textContent=l,document.getElementById("modal").classList="modal hide"},window.requestAnimationFrame(g)}]);